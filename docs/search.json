[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "üîó Online version of the tutorial",
    "section": "",
    "text": "üîó Online version of the tutorial\nBioHaP main deployment site",
    "crumbs": [
      "Contents",
      "üîó Online version of the tutorial"
    ]
  },
  {
    "objectID": "2025_spring/250416_atkacz.html",
    "href": "2025_spring/250416_atkacz.html",
    "title": "Simple Linux ‚Äì An Introduction to Genomic Analysis on Linux",
    "section": "",
    "text": "Large files or datasets‚Äîespecially those containing genomic data‚Äîno problem. This workshop introduces essential Linux commands and simple Bash scripts to streamline data manipulation tasks. We‚Äôll cover key operations such as searching for patterns, globally modifying content, and aligning DNA sequences, such as FASTAQ and FASTA files.\n\n\nNo extra setup needed for Linux and MacOS machines. For windows the recommended way is to install VBox. See the steps to follow:\nHere are the instructions: Installing Ubuntu on VirtualBox\n\n\n\nRun the Installer:\nAfter downloading the VirtualBox installer (.exe file for WinOS, .dmg for MacOS), double-click on it to launch the setup wizard and follow default installation instructions.\nLaunch VirtualBox.\n\n\n\n\n\nOpen VirtualBox and Create a New VM: Click on the New button.\nName and Operating System: Give your VM a name (e.g., ‚ÄúUbuntu‚Äù), select ‚ÄúLinux‚Äù as the type, and choose Ubuntu (64-bit) as the version.\nAssign Memory: Allocate at least 2048 MB (2 GB) of RAM (or higher if your system permits) to ensure smooth operation.\nCreate a Virtual Hard Disk:\n\nChoose Create a virtual hard disk now.\nSelect the VDI (VirtualBox Disk Image) format, and set the disk size (a minimum of 20 GB is recommended).\n\n\n\n\n\n\nAttach the Ubuntu ISO after downloading:\n\nSelect your new VM, click on Settings, then navigate to the Storage section.\nUnder the ‚ÄúController: IDE‚Äù (or SATA), click on the empty optical drive.\nClick the small disk icon on the right and choose Choose a disk file. Browse to and select the Ubuntu ISO you downloaded.\n\nStart the Virtual Machine:\n\nWith the ISO attached, click Start.\n\n\n\n\n\n\nNote\n\n\n\nYou might need to restart your machine\n\n\nThe VM will boot from the ISO, and you should see the Ubuntu welcome screen.\n\nInstall Ubuntu:\n\nFollow the on-screen instructions in the Ubuntu installer:\n\nChoose your language and keyboard layout.\nSelect Install Ubuntu.\nFollow prompts to set up your timezone, create a user account, and configure your disk (use the default settings for a virtual disk).\nOnce the installation is complete, you‚Äôll be prompted to restart the VM.\n\n\n\n\n\n\n\n\n\n\nEventually you will need bigger compute than you can get on your machine and you will be forced to work on Cloud such as High Power cluster (HPC) which allow you to parallelize and run heavy computations.\nThings can be done faster on a command line with practice.\n\n\n\n\nOpen the terminal and let‚Äôs create a file called maria_joanna_song\ntouch maria_joanna_song\nlet‚Äôs just copy in this text - open the file with double click and paste this song into the maria_joanna_song file, also found here\nE virou!\nOnde anda essa Maria?\nEu s√≥ tenho essa Maria\nEu vim do norte direto a Lisboa\nAtr√°s de um sonho\nQue eu nem sei se voa\nTanto quanto n√≥s vo√°vamos\nDebaixo dos lenc√≥is\nA francesinha j√° n√£o tem picante\nE isso faz-me lembrar os instantes\nEm que tu mordias os meus l√°bios\nDepois do amor\nN√£o sei se vou aguentar\nO tempo que vou c√° ficar\nPorque n√£o est√°s\nPorque n√£o est√°s aqui\nAs l√°grimas v√£o secar\nMas a saudade vai continuar\nNo meu peito a chamar\nMaria Joana, Maria Joana\nApanha o primeiro autocarro\nVem ficar pra sempre do meu lado\nMaria Joana, Maria Joana\nApanha o primeiro autocarro\nVem ficar pra sempre do meu lado\nMinha m√£e nunca me viu partir\nMas todo o filho um dia voa\nSaudade, saudade\nMam√£ cuida dela por mim\nDiz-me porque n√£o est√°s aqui\nMaria, sem ti fico √† toa\nSaudade, saudade\nMaria, eu quero-te ver\nN√£o sei se vou aguentar\nO tempo que vou c√° ficar\nPorque a saudade aperta o meu peito\nE d√≥i demais (d√≥i demais)\nAs l√°grimas v√£o secar\nMas a saudade vai continuar\nNo meu peito a chamar\nMaria Joana, Maria Joana\nApanha o primeiro autocarro\nVem ficar pra sempre do meu lado\nMaria Joana (Maria), Maria Joana\nApanha o primeiro autocarro\nVem ficar pra sempre do meu lado\nMaria, Maria, Maria\nMaria, Maria, Maria\n(Maria, Maria, Maria, Maria)\nMaria, Maria, Maria\nMaria, Maria, Maria\n(Maria, Maria, Maria, Maria)\nQuantas l√°grimas chorei\nQuantas noites n√£o dormi\nCada gota que eu deitei\nFez um rio que me leva a ti\nMaria Joana\nMaria Joana (quantas l√°grimas chorei)\nApanha o primeiro autocarro\nVem ficar pra sempre\nDo meu lado (quantas noites n√£o dormi)\nMaria Joana (ai, Maria)\nMaria Joana (cada gota que eu deitei)\nApanha o primeiro autocarro\nVem ficar pra sempre do meu lado\nMaria, Maria, Maria\nMaria, Maria, Maria\n(Maria, Maria, Maria, Maria)\nMaria, Maria, Maria\nMaria, Maria, Maria\n(Maria, Maria, Maria, Maria)\nQuantas l√°grimas chorei\nTo see the full lyrics (TIP: press tab to autocomplete the file name)\ncat maria_joanna_song\nShow the first 5 lines\nhead -5 maria_joanna_song\nTo see only the last 5 lines\ntail -5 maria_joanna_song\nTo see only the last 10 to 15 lines (note the ‚Äú|‚Äù sign it is a pipe and let‚Äôs you combine the commands into one, without dumping the information onto your harddrive)\nhead -15 maria_joanna_song | tail -5\nIf you want to put information into your disk you can do as follows\nhead -15 maria_joanna_song &gt; top15_maria\ntail -5 top15_maria &gt; lines10-15_maria\nTo see the output we need to either click on the file or use the terminal\ncat lines10-15_maria\n\n\n\nHow to find something in the text?\ngrep Maria maria_joanna_song\nAnd how to see only the matched pattern - commands have ‚Äúoptions‚Äù\ngrep -o Maria maria_joanna_song\nYou can always get help ( command --help or shortcut version -h) - generally not much usefull - better to google it or ask ChatGPT\ngrep --help \nLet‚Äôs count word Maria - three different ways to count something\ngrep Maria maria_joanna_song | wc -l\ngrep Maria maria_joanna_song | wc -w\ngrep Maria maria_joanna_song | wc -c\nNow count appearances of Maria Joanna - it is important to use ‚Äú‚Äù if the your search contains a space or some special character\ngrep \"Maria Joana\" maria_joanna_song | wc -l\ngrep \"Maria Joana\" maria_joanna_song | wc -w\ngrep \"Maria Joana\" maria_joanna_song | wc -c\nHow to deal with special characters\ngrep ( maria_joanna_song   #note the error\ngrep \"(\" maria_joanna_song\ngrep \\( maria_joanna_song\n\n\n\n‚Äú.‚Äù and ‚Äú*‚Äù can represent any characters and therefore represent patterns rather than exact matches\ngrep Eu maria_joanna_song\ngrep Eu.* maria_joanna_song\nPlaying with multiple choices\ngrep se maria_joanna_song \ngrep se[i] maria_joanna_song \ngrep se[i,m] maria_joanna_song \nBut I am in love with Donald Trump and not with Maria Joana - how to I fix the song?\nsed 's/Maria Joana/Donald Trump/g'  maria_joanna_song | sed 's/Maria/Donald/g' &gt; donald_trump_song\nLet‚Äôs see what happened - now it doesn‚Äôt rhyme as good\ncat donald_trump_song\nmore donald_trump_song\nOk, but are we sure Donald replaced Maria?\ndiff -u *song \ndiff maria_joanna_song donald_trump_song\nvimdiff *song\n\n\n\n\n\n\nNote\n\n\n\nexit vim using Esc + :q which closes the file, alternatively Esc + :wq which saves the file.\n\n\n\n\n\nHave a look how a loop is being used here\ngrep Lisboa *song\nfor f in *song ; do grep Lisboa $f ; done\nTo show which file Lisboa is found in\nfor f in *song ; do grep -l Lisboa $f ; done\nTo show where is it found (i.e.¬†line number)\nfor f in *song ; do grep -n Lisboa $f ; done\nI have just realised that ‚Äújoanna‚Äù in portuguese is written as ‚Äújoana‚Äù - how do I fix the name of my file\n\noption - fix it but keep the original\n\ncp maria_joanna_song maria_joana_song\n\n# list contents of directory\nls\n\n# other variants\nls -l\nls -la\n\noption - neh, I don‚Äôt need the previous version - it will just cause the confusion later on\n\nmv maria_joanna_song maria_joana_song\nNow let‚Äôs try previous code\ngrep Maria maria_joanna_song  # of course it doesn't work ... - what shall I do now ?\n\n\n\n\n\n\nTaken from official website:\nEDirect will run on Unix and Macintosh computers, and under the Cygwin Unix-emulation environment on Windows PCs. To install the EDirect software, open a terminal window and execute one of the following two commands:\n  sh -c \"$(curl -fsSL https://ftp.ncbi.nlm.nih.gov/entrez/entrezdirect/install-edirect.sh)\"\n\n  sh -c \"$(wget -q https://ftp.ncbi.nlm.nih.gov/entrez/entrezdirect/install-edirect.sh -O -)\"\nThis will download a number of scripts and several precompiled programs into an ‚Äúedirect‚Äù folder in the user‚Äôs home directory. It may then print an additional command for updating the PATH environment variable in the user‚Äôs configuration file. The editing instructions will look something like:\n  echo \"export PATH=\\$HOME/edirect:\\$PATH\" &gt;&gt; $HOME/.bash_profile\nAs a convenience, the installation process ends by offering to run the PATH update command for you. Answer ‚Äúy‚Äù and press the Return key if you want it run. If the PATH is already set correctly, or if you prefer to make any editing changes manually, just press Return.\nOnce installation is complete, run:\n  export PATH=${HOME}/edirect:${PATH}\nto set the PATH for the current terminal session.\n\n\n\n\n\n\nWindows\n\n\n\nYou can try to install SRA-toolkit from here\n\n\n\n\n\nLet‚Äôs download some data from the Genbank - it is 16S V4 amplicon data (here the metadata)\nesearch -db sra -query PRJNA783372 | efetch -format runinfo &gt; SraRunTable.csv\nWe only need the SRRnumber, -f1 means first field.\ncut -f1 -d, SraRunTable*.csv  &gt; runs.txt\nTo save time we will work on four samples only\ntail -4 runs.txt &gt; runs4.txt\n\n\n\nOk, now we download the actual raw data\nprefetch --option-file runs4.txt\nIn case of\n\n\n\n\n\n\nNote\n\n\n\nIn case of Command 'prefetch' not found run\nsudo apt install sra-toolkit\n\n\nLet‚Äôs unpack it\nfor f in SRR* ; do fastq-dump --split-files  $f ; done\n\n\n\n\n\n\nTip\n\n\n\nTo visualize quality scores, small GUI tool fastqc could be used\n\n\n\n\n\nsudo apt install flash\nFirst merge the reads\n# merge\nflash -m 50 -M 500 -x 0.1 SRR17045222_1.fastq SRR17045222_2.fastq\n\n# rename merged file to index it\nmv out.extendedFrags.fastq file1.fastq\nflash -m 50 -M 500 -x 0.1 SRR17045223_1.fastq SRR17045223_2.fastq\nmv out.extendedFrags.fastq file2.fastq\nflash -m 50 -M 500 -x 0.1 SRR17045226_1.fastq SRR17045226_2.fastq\nmv out.extendedFrags.fastq file2.fastq\nflash -m 50 -M 500 -x 0.1 SRR17045227_2.fastq SRR17045227_2.fastq\nmv out.extendedFrags.fastq file2.fastq\nNow we filter low quality reads (here the data is kind of a fake as the fastq download needs to be adjusted wit the prefetch script)\n# if not installed, do\nsudo apt install vsearch\n\nfor f in file* ; do vsearch --fastq_filter $f --fastq_maxee 1.0 --fastqout $f\\_filtered ; done\nIt is getting messy here (delete unwanted files)\nrm *notCombined*\nrm *hist\nrm *histogram\nrm *fastq\n\n\n\n\n\n\nTip\n\n\n\nToo lazy to empty the trash yourself ? the terminal will do that for us gio trash --empty\n\n\nLet‚Äôs convert fastq to fasta\n# if not installed, do\nsudo apt install seqtk\n\nfor f in *fastq_filtered ; do seqtk seq -a $f &gt; $f.fasta ; done ; \n\n\n\n\n\n\nCaution\n\n\n\nBlast is commented out as it is unlikely to work - we could try with internal database one day\n\n\nTo save time let‚Äôs just use 10 reads from each file for taxonomic identification - we will use GenBank nt database\nfor f in *fastq_filtered.fasta ; do head -20 $f &gt; $f\\head ; done\nSimplify the naming\n\n# if not installed, do\nsudo apt install rename\n\nrename 's/.fastq_filtered.fastahead/.fasta/g' *fastq_filtered.fastahead ;\n\n\n\nLet‚Äôs try - it may not work at all, first install\nsudo apt install ncbi-blast+\nblastn -query file1.fasta -db nt -remote -outfmt 6 -max_target_seqs 1 -perc_identity 95 &gt; file1_blast.txt \n\nblastn -query file1.fasta -db nr -remote  &gt; file1_blast2.txt\n\n\nUse the web-based blast, for example on the ncbi server.\nLet‚Äôs create ASV table and visualise the data\ncat file[0-9]*.fastq_filtered.fasta &gt; all_samples.fasta\n# if not installed, do\nsudo apt install vsearch\n\nvsearch --derep_fulllength all_samples.fasta   --output dereplicated.fasta  --sizeout  --relabel ASV_\nvsearch --sortbysize dereplicated.fasta  --output dereplicated_no_singletons.fasta  --minsize 2\nvsearch --cluster_unoise dereplicated_no_singletons.fasta --minsize 2  --unoise_alpha 2   --centroids ASVs.fasta\nvsearch --usearch_global all_samples.fasta --db ASVs.fasta   --id 0.97     --otutabout ASV_table.txt\nWe will use MicrobiomeAnalyst - every tool needs the input in some specific format - here we need to change the table as well\nsed 's/#OTU ID/#NAME/g' ASV_table.txt &gt; ASV_table_MA.txt\nWe need some metadata (all invented here)\nhead -1 ASV_table_MA.txt | fmt -1 | sed 's/NAME/NAME, sample/g'  | sed 's/11$/11,fish/g' | sed 's/13$/13,fish/g' | sed 's/21$/21,fish/g' | sed 's/22$/22,fish/g' |sed 's/23$/23,not_a_fish/g' | sed 's/24$/24,not_a_fish/g' |sed 's/25$/25,not_a_fish/g' | sed 's/27$/27,not_a_fish/g' &gt; metadata.csv\n\n\n\n\n\nFollowing this link you can interrogate the same table (ASV_table_MA.txt) in the interactive jupyter notebook.\nTo compute Braycurtis distances \nTo visualize the PCoA \n\n\n\nIf you have python installed you can run scripts which are in this folder.\npython append_braycurtis3.py ASV_table_MA.txt &&\npython pcoa_with_metadata_quick_legend.py\n\n\n\nThe power of command line lies in the fact, that once you test your pipeline command by command, you can copy all the commands into a so-called bash script and rerun the whole thing at once.\n\n\n\n\n\n\nCaution\n\n\n\n\n\nYou may want to create a separate new virtual environment (example uses conda) and install necessary dependencies first\n# create virtual environment\nconda create -n gen-test python\n\n# activate it\nconda activate gen-test\n\n# install deps (pip or conda install)\npip install dask\npip install --upgrade --force-reinstall scipy dask\npip install pyarrow\n\npython3 append_braycurtis3.py ASV_table_MA.txt\n\n# dependencies for the second script\npip install numpy==1.24.3\npip install seaborn\npip install panel\npip install scikit-bio\n\npython3 pcoa_with_metadata_quick_work.py \n\n\n\n# make a new folder for a test\nmkdir pipeline_test\n\n# copy python scripts too, if you want to visualize the results.\ncp *.py ./pipeline_test\n\n# take the commands from the command list file\ngrep -A 1000 \"genomics part\" course_linux_commands | sed '/fastqc/d' | sed '/\\*\\*\\*/d' &gt; ./pipeline_test/my_first_pipeline.sh \nRun the pipeline with\nbash my_fist_pipeline.sh\n\n\n\n\n\n\nCaution\n\n\n\nYou might need to make the script executable\nchmod +x my_fist_pipeline.sh\n\n# then you can run directly\n./my_fist_pipeline.sh",
    "crumbs": [
      "Contents",
      "Simple Linux ‚Äì An Introduction to Genomic Analysis on Linux"
    ]
  },
  {
    "objectID": "2025_spring/250416_atkacz.html#setup",
    "href": "2025_spring/250416_atkacz.html#setup",
    "title": "Simple Linux ‚Äì An Introduction to Genomic Analysis on Linux",
    "section": "",
    "text": "No extra setup needed for Linux and MacOS machines. For windows the recommended way is to install VBox. See the steps to follow:\nHere are the instructions: Installing Ubuntu on VirtualBox\n\n\n\nRun the Installer:\nAfter downloading the VirtualBox installer (.exe file for WinOS, .dmg for MacOS), double-click on it to launch the setup wizard and follow default installation instructions.\nLaunch VirtualBox.\n\n\n\n\n\nOpen VirtualBox and Create a New VM: Click on the New button.\nName and Operating System: Give your VM a name (e.g., ‚ÄúUbuntu‚Äù), select ‚ÄúLinux‚Äù as the type, and choose Ubuntu (64-bit) as the version.\nAssign Memory: Allocate at least 2048 MB (2 GB) of RAM (or higher if your system permits) to ensure smooth operation.\nCreate a Virtual Hard Disk:\n\nChoose Create a virtual hard disk now.\nSelect the VDI (VirtualBox Disk Image) format, and set the disk size (a minimum of 20 GB is recommended).\n\n\n\n\n\n\nAttach the Ubuntu ISO after downloading:\n\nSelect your new VM, click on Settings, then navigate to the Storage section.\nUnder the ‚ÄúController: IDE‚Äù (or SATA), click on the empty optical drive.\nClick the small disk icon on the right and choose Choose a disk file. Browse to and select the Ubuntu ISO you downloaded.\n\nStart the Virtual Machine:\n\nWith the ISO attached, click Start.\n\n\n\n\n\n\nNote\n\n\n\nYou might need to restart your machine\n\n\nThe VM will boot from the ISO, and you should see the Ubuntu welcome screen.\n\nInstall Ubuntu:\n\nFollow the on-screen instructions in the Ubuntu installer:\n\nChoose your language and keyboard layout.\nSelect Install Ubuntu.\nFollow prompts to set up your timezone, create a user account, and configure your disk (use the default settings for a virtual disk).\nOnce the installation is complete, you‚Äôll be prompted to restart the VM.",
    "crumbs": [
      "Contents",
      "Simple Linux ‚Äì An Introduction to Genomic Analysis on Linux"
    ]
  },
  {
    "objectID": "2025_spring/250416_atkacz.html#command-line",
    "href": "2025_spring/250416_atkacz.html#command-line",
    "title": "Simple Linux ‚Äì An Introduction to Genomic Analysis on Linux",
    "section": "",
    "text": "Eventually you will need bigger compute than you can get on your machine and you will be forced to work on Cloud such as High Power cluster (HPC) which allow you to parallelize and run heavy computations.\nThings can be done faster on a command line with practice.\n\n\n\n\nOpen the terminal and let‚Äôs create a file called maria_joanna_song\ntouch maria_joanna_song\nlet‚Äôs just copy in this text - open the file with double click and paste this song into the maria_joanna_song file, also found here\nE virou!\nOnde anda essa Maria?\nEu s√≥ tenho essa Maria\nEu vim do norte direto a Lisboa\nAtr√°s de um sonho\nQue eu nem sei se voa\nTanto quanto n√≥s vo√°vamos\nDebaixo dos lenc√≥is\nA francesinha j√° n√£o tem picante\nE isso faz-me lembrar os instantes\nEm que tu mordias os meus l√°bios\nDepois do amor\nN√£o sei se vou aguentar\nO tempo que vou c√° ficar\nPorque n√£o est√°s\nPorque n√£o est√°s aqui\nAs l√°grimas v√£o secar\nMas a saudade vai continuar\nNo meu peito a chamar\nMaria Joana, Maria Joana\nApanha o primeiro autocarro\nVem ficar pra sempre do meu lado\nMaria Joana, Maria Joana\nApanha o primeiro autocarro\nVem ficar pra sempre do meu lado\nMinha m√£e nunca me viu partir\nMas todo o filho um dia voa\nSaudade, saudade\nMam√£ cuida dela por mim\nDiz-me porque n√£o est√°s aqui\nMaria, sem ti fico √† toa\nSaudade, saudade\nMaria, eu quero-te ver\nN√£o sei se vou aguentar\nO tempo que vou c√° ficar\nPorque a saudade aperta o meu peito\nE d√≥i demais (d√≥i demais)\nAs l√°grimas v√£o secar\nMas a saudade vai continuar\nNo meu peito a chamar\nMaria Joana, Maria Joana\nApanha o primeiro autocarro\nVem ficar pra sempre do meu lado\nMaria Joana (Maria), Maria Joana\nApanha o primeiro autocarro\nVem ficar pra sempre do meu lado\nMaria, Maria, Maria\nMaria, Maria, Maria\n(Maria, Maria, Maria, Maria)\nMaria, Maria, Maria\nMaria, Maria, Maria\n(Maria, Maria, Maria, Maria)\nQuantas l√°grimas chorei\nQuantas noites n√£o dormi\nCada gota que eu deitei\nFez um rio que me leva a ti\nMaria Joana\nMaria Joana (quantas l√°grimas chorei)\nApanha o primeiro autocarro\nVem ficar pra sempre\nDo meu lado (quantas noites n√£o dormi)\nMaria Joana (ai, Maria)\nMaria Joana (cada gota que eu deitei)\nApanha o primeiro autocarro\nVem ficar pra sempre do meu lado\nMaria, Maria, Maria\nMaria, Maria, Maria\n(Maria, Maria, Maria, Maria)\nMaria, Maria, Maria\nMaria, Maria, Maria\n(Maria, Maria, Maria, Maria)\nQuantas l√°grimas chorei\nTo see the full lyrics (TIP: press tab to autocomplete the file name)\ncat maria_joanna_song\nShow the first 5 lines\nhead -5 maria_joanna_song\nTo see only the last 5 lines\ntail -5 maria_joanna_song\nTo see only the last 10 to 15 lines (note the ‚Äú|‚Äù sign it is a pipe and let‚Äôs you combine the commands into one, without dumping the information onto your harddrive)\nhead -15 maria_joanna_song | tail -5\nIf you want to put information into your disk you can do as follows\nhead -15 maria_joanna_song &gt; top15_maria\ntail -5 top15_maria &gt; lines10-15_maria\nTo see the output we need to either click on the file or use the terminal\ncat lines10-15_maria\n\n\n\nHow to find something in the text?\ngrep Maria maria_joanna_song\nAnd how to see only the matched pattern - commands have ‚Äúoptions‚Äù\ngrep -o Maria maria_joanna_song\nYou can always get help ( command --help or shortcut version -h) - generally not much usefull - better to google it or ask ChatGPT\ngrep --help \nLet‚Äôs count word Maria - three different ways to count something\ngrep Maria maria_joanna_song | wc -l\ngrep Maria maria_joanna_song | wc -w\ngrep Maria maria_joanna_song | wc -c\nNow count appearances of Maria Joanna - it is important to use ‚Äú‚Äù if the your search contains a space or some special character\ngrep \"Maria Joana\" maria_joanna_song | wc -l\ngrep \"Maria Joana\" maria_joanna_song | wc -w\ngrep \"Maria Joana\" maria_joanna_song | wc -c\nHow to deal with special characters\ngrep ( maria_joanna_song   #note the error\ngrep \"(\" maria_joanna_song\ngrep \\( maria_joanna_song\n\n\n\n‚Äú.‚Äù and ‚Äú*‚Äù can represent any characters and therefore represent patterns rather than exact matches\ngrep Eu maria_joanna_song\ngrep Eu.* maria_joanna_song\nPlaying with multiple choices\ngrep se maria_joanna_song \ngrep se[i] maria_joanna_song \ngrep se[i,m] maria_joanna_song \nBut I am in love with Donald Trump and not with Maria Joana - how to I fix the song?\nsed 's/Maria Joana/Donald Trump/g'  maria_joanna_song | sed 's/Maria/Donald/g' &gt; donald_trump_song\nLet‚Äôs see what happened - now it doesn‚Äôt rhyme as good\ncat donald_trump_song\nmore donald_trump_song\nOk, but are we sure Donald replaced Maria?\ndiff -u *song \ndiff maria_joanna_song donald_trump_song\nvimdiff *song\n\n\n\n\n\n\nNote\n\n\n\nexit vim using Esc + :q which closes the file, alternatively Esc + :wq which saves the file.\n\n\n\n\n\nHave a look how a loop is being used here\ngrep Lisboa *song\nfor f in *song ; do grep Lisboa $f ; done\nTo show which file Lisboa is found in\nfor f in *song ; do grep -l Lisboa $f ; done\nTo show where is it found (i.e.¬†line number)\nfor f in *song ; do grep -n Lisboa $f ; done\nI have just realised that ‚Äújoanna‚Äù in portuguese is written as ‚Äújoana‚Äù - how do I fix the name of my file\n\noption - fix it but keep the original\n\ncp maria_joanna_song maria_joana_song\n\n# list contents of directory\nls\n\n# other variants\nls -l\nls -la\n\noption - neh, I don‚Äôt need the previous version - it will just cause the confusion later on\n\nmv maria_joanna_song maria_joana_song\nNow let‚Äôs try previous code\ngrep Maria maria_joanna_song  # of course it doesn't work ... - what shall I do now ?",
    "crumbs": [
      "Contents",
      "Simple Linux ‚Äì An Introduction to Genomic Analysis on Linux"
    ]
  },
  {
    "objectID": "2025_spring/250416_atkacz.html#genomics",
    "href": "2025_spring/250416_atkacz.html#genomics",
    "title": "Simple Linux ‚Äì An Introduction to Genomic Analysis on Linux",
    "section": "",
    "text": "Taken from official website:\nEDirect will run on Unix and Macintosh computers, and under the Cygwin Unix-emulation environment on Windows PCs. To install the EDirect software, open a terminal window and execute one of the following two commands:\n  sh -c \"$(curl -fsSL https://ftp.ncbi.nlm.nih.gov/entrez/entrezdirect/install-edirect.sh)\"\n\n  sh -c \"$(wget -q https://ftp.ncbi.nlm.nih.gov/entrez/entrezdirect/install-edirect.sh -O -)\"\nThis will download a number of scripts and several precompiled programs into an ‚Äúedirect‚Äù folder in the user‚Äôs home directory. It may then print an additional command for updating the PATH environment variable in the user‚Äôs configuration file. The editing instructions will look something like:\n  echo \"export PATH=\\$HOME/edirect:\\$PATH\" &gt;&gt; $HOME/.bash_profile\nAs a convenience, the installation process ends by offering to run the PATH update command for you. Answer ‚Äúy‚Äù and press the Return key if you want it run. If the PATH is already set correctly, or if you prefer to make any editing changes manually, just press Return.\nOnce installation is complete, run:\n  export PATH=${HOME}/edirect:${PATH}\nto set the PATH for the current terminal session.\n\n\n\n\n\n\nWindows\n\n\n\nYou can try to install SRA-toolkit from here\n\n\n\n\n\nLet‚Äôs download some data from the Genbank - it is 16S V4 amplicon data (here the metadata)\nesearch -db sra -query PRJNA783372 | efetch -format runinfo &gt; SraRunTable.csv\nWe only need the SRRnumber, -f1 means first field.\ncut -f1 -d, SraRunTable*.csv  &gt; runs.txt\nTo save time we will work on four samples only\ntail -4 runs.txt &gt; runs4.txt\n\n\n\nOk, now we download the actual raw data\nprefetch --option-file runs4.txt\nIn case of\n\n\n\n\n\n\nNote\n\n\n\nIn case of Command 'prefetch' not found run\nsudo apt install sra-toolkit\n\n\nLet‚Äôs unpack it\nfor f in SRR* ; do fastq-dump --split-files  $f ; done\n\n\n\n\n\n\nTip\n\n\n\nTo visualize quality scores, small GUI tool fastqc could be used\n\n\n\n\n\nsudo apt install flash\nFirst merge the reads\n# merge\nflash -m 50 -M 500 -x 0.1 SRR17045222_1.fastq SRR17045222_2.fastq\n\n# rename merged file to index it\nmv out.extendedFrags.fastq file1.fastq\nflash -m 50 -M 500 -x 0.1 SRR17045223_1.fastq SRR17045223_2.fastq\nmv out.extendedFrags.fastq file2.fastq\nflash -m 50 -M 500 -x 0.1 SRR17045226_1.fastq SRR17045226_2.fastq\nmv out.extendedFrags.fastq file2.fastq\nflash -m 50 -M 500 -x 0.1 SRR17045227_2.fastq SRR17045227_2.fastq\nmv out.extendedFrags.fastq file2.fastq\nNow we filter low quality reads (here the data is kind of a fake as the fastq download needs to be adjusted wit the prefetch script)\n# if not installed, do\nsudo apt install vsearch\n\nfor f in file* ; do vsearch --fastq_filter $f --fastq_maxee 1.0 --fastqout $f\\_filtered ; done\nIt is getting messy here (delete unwanted files)\nrm *notCombined*\nrm *hist\nrm *histogram\nrm *fastq\n\n\n\n\n\n\nTip\n\n\n\nToo lazy to empty the trash yourself ? the terminal will do that for us gio trash --empty\n\n\nLet‚Äôs convert fastq to fasta\n# if not installed, do\nsudo apt install seqtk\n\nfor f in *fastq_filtered ; do seqtk seq -a $f &gt; $f.fasta ; done ; \n\n\n\n\n\n\nCaution\n\n\n\nBlast is commented out as it is unlikely to work - we could try with internal database one day\n\n\nTo save time let‚Äôs just use 10 reads from each file for taxonomic identification - we will use GenBank nt database\nfor f in *fastq_filtered.fasta ; do head -20 $f &gt; $f\\head ; done\nSimplify the naming\n\n# if not installed, do\nsudo apt install rename\n\nrename 's/.fastq_filtered.fastahead/.fasta/g' *fastq_filtered.fastahead ;\n\n\n\nLet‚Äôs try - it may not work at all, first install\nsudo apt install ncbi-blast+\nblastn -query file1.fasta -db nt -remote -outfmt 6 -max_target_seqs 1 -perc_identity 95 &gt; file1_blast.txt \n\nblastn -query file1.fasta -db nr -remote  &gt; file1_blast2.txt\n\n\nUse the web-based blast, for example on the ncbi server.\nLet‚Äôs create ASV table and visualise the data\ncat file[0-9]*.fastq_filtered.fasta &gt; all_samples.fasta\n# if not installed, do\nsudo apt install vsearch\n\nvsearch --derep_fulllength all_samples.fasta   --output dereplicated.fasta  --sizeout  --relabel ASV_\nvsearch --sortbysize dereplicated.fasta  --output dereplicated_no_singletons.fasta  --minsize 2\nvsearch --cluster_unoise dereplicated_no_singletons.fasta --minsize 2  --unoise_alpha 2   --centroids ASVs.fasta\nvsearch --usearch_global all_samples.fasta --db ASVs.fasta   --id 0.97     --otutabout ASV_table.txt\nWe will use MicrobiomeAnalyst - every tool needs the input in some specific format - here we need to change the table as well\nsed 's/#OTU ID/#NAME/g' ASV_table.txt &gt; ASV_table_MA.txt\nWe need some metadata (all invented here)\nhead -1 ASV_table_MA.txt | fmt -1 | sed 's/NAME/NAME, sample/g'  | sed 's/11$/11,fish/g' | sed 's/13$/13,fish/g' | sed 's/21$/21,fish/g' | sed 's/22$/22,fish/g' |sed 's/23$/23,not_a_fish/g' | sed 's/24$/24,not_a_fish/g' |sed 's/25$/25,not_a_fish/g' | sed 's/27$/27,not_a_fish/g' &gt; metadata.csv",
    "crumbs": [
      "Contents",
      "Simple Linux ‚Äì An Introduction to Genomic Analysis on Linux"
    ]
  },
  {
    "objectID": "2025_spring/250416_atkacz.html#visualise-the-data-with-python",
    "href": "2025_spring/250416_atkacz.html#visualise-the-data-with-python",
    "title": "Simple Linux ‚Äì An Introduction to Genomic Analysis on Linux",
    "section": "",
    "text": "Following this link you can interrogate the same table (ASV_table_MA.txt) in the interactive jupyter notebook.\nTo compute Braycurtis distances \nTo visualize the PCoA",
    "crumbs": [
      "Contents",
      "Simple Linux ‚Äì An Introduction to Genomic Analysis on Linux"
    ]
  },
  {
    "objectID": "2025_spring/250416_atkacz.html#local-python-scripts",
    "href": "2025_spring/250416_atkacz.html#local-python-scripts",
    "title": "Simple Linux ‚Äì An Introduction to Genomic Analysis on Linux",
    "section": "",
    "text": "If you have python installed you can run scripts which are in this folder.\npython append_braycurtis3.py ASV_table_MA.txt &&\npython pcoa_with_metadata_quick_legend.py",
    "crumbs": [
      "Contents",
      "Simple Linux ‚Äì An Introduction to Genomic Analysis on Linux"
    ]
  },
  {
    "objectID": "2025_spring/250416_atkacz.html#finally",
    "href": "2025_spring/250416_atkacz.html#finally",
    "title": "Simple Linux ‚Äì An Introduction to Genomic Analysis on Linux",
    "section": "",
    "text": "The power of command line lies in the fact, that once you test your pipeline command by command, you can copy all the commands into a so-called bash script and rerun the whole thing at once.\n\n\n\n\n\n\nCaution\n\n\n\n\n\nYou may want to create a separate new virtual environment (example uses conda) and install necessary dependencies first\n# create virtual environment\nconda create -n gen-test python\n\n# activate it\nconda activate gen-test\n\n# install deps (pip or conda install)\npip install dask\npip install --upgrade --force-reinstall scipy dask\npip install pyarrow\n\npython3 append_braycurtis3.py ASV_table_MA.txt\n\n# dependencies for the second script\npip install numpy==1.24.3\npip install seaborn\npip install panel\npip install scikit-bio\n\npython3 pcoa_with_metadata_quick_work.py \n\n\n\n# make a new folder for a test\nmkdir pipeline_test\n\n# copy python scripts too, if you want to visualize the results.\ncp *.py ./pipeline_test\n\n# take the commands from the command list file\ngrep -A 1000 \"genomics part\" course_linux_commands | sed '/fastqc/d' | sed '/\\*\\*\\*/d' &gt; ./pipeline_test/my_first_pipeline.sh \nRun the pipeline with\nbash my_fist_pipeline.sh\n\n\n\n\n\n\nCaution\n\n\n\nYou might need to make the script executable\nchmod +x my_fist_pipeline.sh\n\n# then you can run directly\n./my_fist_pipeline.sh",
    "crumbs": [
      "Contents",
      "Simple Linux ‚Äì An Introduction to Genomic Analysis on Linux"
    ]
  }
]